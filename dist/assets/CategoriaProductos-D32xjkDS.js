import{av as h,r as t,j as e,z as u,A as l,H as j,K as p}from"./index-C7bfEiFr.js";import{u as y}from"./useConfig-CN1-DwZd.js";import{P}from"./ProductoCard-6nA3dnkp.js";import{A as v,a as C}from"./index-COPrfliv.js";import"./DialogTitle-KkI_10Mp.js";import"./Phone-DiPd7tUT.js";import"./CardMedia-BdpU_WlW.js";const T=()=>{const{id:o}=h(),[n,m]=t.useState([]),[x,i]=t.useState(!0),[c,r]=t.useState(null),{api:d}=y();return t.useEffect(()=>{(async()=>{i(!0),r(null);try{const s=localStorage.getItem("accessToken"),g=s?{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}:{},f=await C.get(`${d.baseURL}/ventas/productos/por_categoria?categoria_id=${o}`,{headers:g});m(f.data)}catch(s){s.response?s.response.status===401?r("No tienes permisos para ver estos productos. Inicia sesión nuevamente."):r("Error al cargar los productos. Inténtalo de nuevo."):r("Error de conexión con el servidor.")}finally{i(!1)}})()},[o,d.baseURL]),e.jsxs(u,{sx:{padding:3},children:[e.jsxs(l,{variant:"h5",gutterBottom:!0,children:["Productos de la Categoría ",o]}),x?e.jsx(u,{sx:{display:"flex",justifyContent:"center",padding:4},children:e.jsx(j,{})}):c?e.jsx(v,{severity:"error",children:c}):n.length>0?e.jsx(p,{container:!0,spacing:3,children:n.map(a=>e.jsx(p,{item:!0,xs:12,sm:6,md:4,children:e.jsx(P,{...a})},a.id))}):e.jsx(l,{children:"No hay productos en esta categoría."})]})};export{T as default};
