import{e as h,r as t,j as e,B as u,T as p,c as j,G as l}from"./index-DS7J-bX6.js";import{u as y}from"./useConfig-CN1-DwZd.js";import{P}from"./ProductoCard-C1Oj0fgO.js";import{A as v,a as C}from"./index-BRcMmfnR.js";import"./DialogTitle-CN8NVrbV.js";import"./Phone-r1caIRjM.js";import"./useControlled-DFVkmYp8.js";import"./CardMedia-DE4nbTAj.js";import"./DialogActions-CqbzLWRL.js";const b=()=>{const{id:o}=h(),[n,m]=t.useState([]),[x,i]=t.useState(!0),[c,r]=t.useState(null),{api:d}=y();return t.useEffect(()=>{(async()=>{i(!0),r(null);try{const s=localStorage.getItem("accessToken"),g=s?{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}:{},f=await C.get(`${d.baseURL}/ventas/productos/por_categoria?categoria_id=${o}`,{headers:g});m(f.data)}catch(s){s.response?s.response.status===401?r("No tienes permisos para ver estos productos. Inicia sesión nuevamente."):r("Error al cargar los productos. Inténtalo de nuevo."):r("Error de conexión con el servidor.")}finally{i(!1)}})()},[o,d.baseURL]),e.jsxs(u,{sx:{padding:3},children:[e.jsxs(p,{variant:"h5",gutterBottom:!0,children:["Productos de la Categoría ",o]}),x?e.jsx(u,{sx:{display:"flex",justifyContent:"center",padding:4},children:e.jsx(j,{})}):c?e.jsx(v,{severity:"error",children:c}):n.length>0?e.jsx(l,{container:!0,spacing:3,children:n.map(a=>e.jsx(l,{item:!0,xs:12,sm:6,md:4,children:e.jsx(P,{...a})},a.id))}):e.jsx(p,{children:"No hay productos en esta categoría."})]})};export{b as default};
